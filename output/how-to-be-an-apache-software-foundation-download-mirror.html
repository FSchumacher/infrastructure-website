<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>How to be an Apache Software Foundation download mirror</title>
        <link rel="stylesheet" href="https://infra-test.apache.org/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://infra-test.apache.org/">Apache Infrastructure</a></h1>
                <nav><ul>
                    <li><a href="https://infra-test.apache.org/./apache-and-github.html">Apache and GitHub</a></li>
                    <li><a href="https://infra-test.apache.org/./application-upgrades-policy-and-workflow.html">Application upgrades policy and workflow</a></li>
                    <li><a href="https://infra-test.apache.org/./distributing-through-the-apple-developer-program.html">Distributing through the Apple Developer Program</a></li>
                    <li><a href="https://infra-test.apache.org/./applying-the-apache-license-version-20.html">Applying the Apache license, version 2.0</a></li>
                    <li><a href="https://infra-test.apache.org/./asf-pelican-feature-branches.html">ASF Pelican feature branches</a></li>
                    <li><a href="https://infra-test.apache.org/./asf-pelican-data-model.html">ASF Pelican data model</a></li>
                    <li><a href="https://infra-test.apache.org/./asf-pelican-getting-started-guide.html">ASF-Pelican getting-started guide</a></li>
                    <li><a href="https://infra-test.apache.org/./local-pelican-builds.html">Local Pelican builds</a></li>
                    <li><a href="https://infra-test.apache.org/./asf-pelican-plugins.html">ASF Pelican plugins</a></li>
                    <li><a href="https://infra-test.apache.org/./apache-theme-for-asf-pelican.html">Apache Theme for ASF Pelican</a></li>
                    <li><a href="https://infra-test.apache.org/./asf-pelican.html">ASF-Pelican</a></li>
                    <li><a href="https://infra-test.apache.org/./asfbot-irc-services-and-archives.html">ASFBot: IRC services and archives</a></li>
                    <li><a href="https://infra-test.apache.org/./backup-policy.html">Backup policy</a></li>
                    <li><a href="https://infra-test.apache.org/./writing-a-good-bug-report.html">Writing a good bug report</a></li>
                    <li><a href="https://infra-test.apache.org/./committer-email.html">Committer Email</a></li>
                    <li><a href="https://infra-test.apache.org/./policy-for-outreach-to-committers.html">Policy for Outreach to Committers</a></li>
                    <li><a href="https://infra-test.apache.org/./committers-faqs.html">Committers' FAQs</a></li>
                    <li><a href="https://infra-test.apache.org/./contact-the-infrastructure-team.html">Contact the Infrastructure Team</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/contactinfra.html">Contacting Infrastructure</a></li>
                    <li><a href="https://infra-test.apache.org/./tips-for-apache-project-email-contributors.html">Tips for Apache project email contributors</a></li>
                    <li><a href="https://infra-test.apache.org/./guide-for-new-project-contributors.html">Guide for new project contributors</a></li>
                    <li><a href="https://infra-test.apache.org/./handling-cryptography-within-an-asf-release.html">Handling cryptography within an ASF release</a></li>
                    <li><a href="https://infra-test.apache.org/./confluence-wiki-space-for-your-project.html">Confluence Wiki space for your project</a></li>
                    <li><a href="https://infra-test.apache.org/./requesting-access-to-the-digicert-code-signing-service.html">Requesting access to the Digicert code signing service</a></li>
                    <li><a href="https://infra-test.apache.org/./using-the-digicert-code-signing-service.html">Using the Digicert code signing service</a></li>
                    <li><a href="https://infra-test.apache.org/./documentation.html">Documentation</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/email.html">Committer e-mail configuration</a></li>
                    <li><a href="https://infra-test.apache.org/./fingerprints.html">Fingerprints</a></li>
                    <li><a href="https://infra-test.apache.org/./github-flavored-markdown.html">GitHub Flavored Markdown</a></li>
                    <li><a href="https://infra-test.apache.org/./getting-started-with-git.html">Getting started with Git</a></li>
                    <li><a href="https://infra-test.apache.org/./git-access-to-apache-subversion-codebases.html">Git access to Apache Subversion codebases</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/git.html">Getting started with Git</a></li>
                    <li><a href="https://infra-test.apache.org/./github-actions-policy.html">GitHub Actions Policy</a></li>
                    <li><a href="https://infra-test.apache.org/./github-actions-and-secrets.html">GitHub Actions and Secrets</a></li>
                    <li><a href="https://infra-test.apache.org/./github-pages-for-projects.html">GitHub Pages for projects</a></li>
                    <li><a href="https://infra-test.apache.org/./roles-for-project-github-repositories.html">Roles for project GitHub repositories</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/github.html">Apache and GitHub</a></li>
                    <li><a href="https://infra-test.apache.org/./host-a-jenkins-or-buildbot-agent.html">Host a Jenkins or Buildbot agent</a></li>
                    <li class="active"><a href="https://infra-test.apache.org/./how-to-be-an-apache-software-foundation-download-mirror.html">How to be an Apache Software Foundation download mirror</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/id.html">Changing your account details (self serve)</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/index.html">Committer Documentation</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/index.html">Reference Documentation</a></li>
                    <li><a href="https://infra-test.apache.org/./self-serve-tools.html">Self-serve Tools</a></li>
                    <li><a href="https://infra-test.apache.org/./site-wide-ban-policy.html">Site-wide ban policy</a></li>
                    <li><a href="https://infra-test.apache.org/./details-on-contacting-infra.html">Details on contacting Infra</a></li>
                    <li><a href="https://infra-test.apache.org/./infra-and-the-incubator.html">Infra and the Incubator</a></li>
                    <li><a href="https://infra-test.apache.org/./apache-infrastructure-mailing-lists.html">Apache Infrastructure mailing lists</a></li>
                    <li><a href="https://infra-test.apache.org/./volunteering-for-apache-infrastructure.html">Volunteering for Apache Infrastructure</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/jenkins-docker.html">Using Docker with builds.apache.org</a></li>
                    <li><a href="https://infra-test.apache.org/./guidelines-for-creating-a-jira-ticket.html">Guidelines for creating a Jira ticket</a></li>
                    <li><a href="https://infra-test.apache.org/./how-to-transition-to-a-new-pgp-key.html">How to transition to a new PGP key</a></li>
                    <li><a href="https://infra-test.apache.org/./assembling-license-and-notice-files.html">Assembling LICENSE and NOTICE files</a></li>
                    <li><a href="https://infra-test.apache.org/./localization.html">Localization</a></li>
                    <li><a href="https://infra-test.apache.org/./machines-and-fingerprints.html">Machines and Fingerprints</a></li>
                    <li><a href="https://infra-test.apache.org/./mail-rejection-policy.html">Mail Rejection Policy</a></li>
                    <li><a href="https://infra-test.apache.org/./mailing-list-moderation.html">Mailing list moderation</a></li>
                    <li><a href="https://infra-test.apache.org/./managing-project-committers.html">Managing Project Committers</a></li>
                    <li><a href="https://infra-test.apache.org/./apache-mirroring-information.html">Apache mirroring information</a></li>
                    <li><a href="https://infra-test.apache.org/./guide-for-new-project-committers.html">Guide for new project committers</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/newaccount.html">Guide to new committers</a></li>
                    <li><a href="https://infra-test.apache.org/./open-access-svn.html">Open-access SVN</a></li>
                    <li><a href="https://infra-test.apache.org/./cryptography-with-openpgp.html">Cryptography with OpenPGP</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/opie.html">Using OPIE</a></li>
                    <li><a href="https://infra-test.apache.org/./operating-system-upgrade-policy.html">Operating system upgrade policy</a></li>
                    <li><a href="https://infra-test.apache.org/./how-to-submit-a-patch-for-project-code.html">How to submit a patch for project code</a></li>
                    <li><a href="https://infra-test.apache.org/./build-and-manage-a-project-website-with-pelican-and-buildbot.html">Build and manage a project website with Pelican and Buildbot</a></li>
                    <li><a href="https://infra-test.apache.org/./infra-policies.html">Infra policies</a></li>
                    <li><a href="https://infra-test.apache.org/./project-blog.html">Project Blog</a></li>
                    <li><a href="https://infra-test.apache.org/./project-and-product-names.html">Project and product names</a></li>
                    <li><a href="https://infra-test.apache.org/./project-site-policy.html">Project site policy</a></li>
                    <li><a href="https://infra-test.apache.org/./managing-your-project-web-site.html">Managing your project web site</a></li>
                    <li><a href="https://infra-test.apache.org/./publishing-maven-releases-to-maven-central-repository.html">Publishing Maven Releases to Maven Central Repository</a></li>
                    <li><a href="https://infra-test.apache.org/./subscribe-to-apache-software-foundation-infrastructure-events.html">Subscribe to Apache Software Foundation infrastructure events</a></li>
                    <li><a href="https://infra-test.apache.org/./release-distribution-policy.html">Release Distribution Policy</a></li>
                    <li><a href="https://infra-test.apache.org/./release-download-pages-for-projects.html">Release Download Pages for Projects</a></li>
                    <li><a href="https://infra-test.apache.org/./release-creation-process.html">Release Creation Process</a></li>
                    <li><a href="https://infra-test.apache.org/./signing-releases.html">Signing Releases</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/release.html">Releasing project packages</a></li>
                    <li><a href="https://infra-test.apache.org/./repository-access-policy.html">Repository access policy</a></li>
                    <li><a href="https://infra-test.apache.org/./apache-maven-repositories.html">Apache Maven repositories</a></li>
                    <li><a href="https://infra-test.apache.org/./requesting-an-issue-and-feature-request-tracker-for-a-project.html">Requesting an issue and feature-request tracker for a project</a></li>
                    <li><a href="https://infra-test.apache.org/./response-time.html">Response time</a></li>
                    <li><a href="https://infra-test.apache.org/./roadmap-for-apache-infrastructure.html">Roadmap for Apache Infrastructure</a></li>
                    <li><a href="https://infra-test.apache.org/./self-hosted-runners.html">Self-hosted runners</a></li>
                    <li><a href="https://infra-test.apache.org/./services-and-tools.html">Services and Tools</a></li>
                    <li><a href="https://infra-test.apache.org/./slack-for-asf-projects.html">Slack for ASF projects</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/ssh.html">Setting up SSH for ASF machines</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/start.html">Committer documentation</a></li>
                    <li><a href="https://infra-test.apache.org/./status-pages.html">Status pages</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/subversion.html">Using Subversion</a></li>
                    <li><a href="https://infra-test.apache.org/./subversion-basics.html">Subversion basics</a></li>
                    <li><a href="https://infra-test.apache.org/./svn-to-git-migration.html">SVN to Git migration</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/svngit2jira.html">Subversion and Git integration with JIRA tickets</a></li>
                    <li><a href="https://infra-test.apache.org/./subversion-and-git-integration-with-jira-tickets.html">Subversion and Git integration with Jira tickets</a></li>
                    <li><a href="https://infra-test.apache.org/./about-the-apache-infrastructure-team.html">About the Apache Infrastructure Team</a></li>
                    <li><a href="https://infra-test.apache.org/./understanding-opensource.html">Understanding Opensource</a></li>
                    <li><a href="https://infra-test.apache.org/./user-documentation-for-project-releases.html">User documentation for project releases</a></li>
                    <li><a href="https://infra-test.apache.org/./committer-ssh-configuration-on-windows.html">Committer SSH configuration on Windows</a></li>
                    <li><a href="https://infra-test.apache.org/./committer-ssh-access.html">Committer SSH Access</a></li>
                    <li><a href="https://infra-test.apache.org/./source-code-repositories-at-apache.html">Source Code Repositories at Apache</a></li>
                    <li><a href="https://infra-test.apache.org/./requesting-a-virtual-machine-for-a-project.html">Requesting a virtual machine for a project</a></li>
                    <li><a href="https://infra-test.apache.org/./project-vm-policy.html">Project VM policy</a></li>
                    <li><a href="https://infra-test.apache.org/./guidelines-for-project-websites.html">Guidelines for project websites</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/website-policy.html">Web Site Guidelines</a></li>
                    <li><a href="https://infra-test.apache.org/./reference/committer/website.html">How To Manage any Apache Project's Website</a></li>
                    <li><a href="https://infra-test.apache.org/./writable-git-repositories.html">Writable Git repositories</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">How to be an Apache Software Foundation download mirror</h1>
    
    <p>The Apache Software Foundation has mirror sites all around the world, but we are always looking for additional reliable and well-connected sites that can help us distribute our software by mirroring our main software distribution directory.</p>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#techniques">Mirroring techniques</a></li>
<li><a href="#sponsorinfo">Sponsor information</a></li>
<li><a href="#testing">Testing your mirror</a></li>
<li><a href="#ready">Let us know you when are ready</a></li>
<li><a href="#questions">Questions?</a></li>
</ul>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>

<p>We have a few requirements for those wishing to run a mirror:</p>
<ul>
<li>We select https mirrors as "preferred" mirrors. We do add ftp mirrors to our list, but we no longer accept http mirrors.</li>
<li>At least 150 GB of available disk space. The current distribution directory is around 110 GB, but we wish to leave room for considerable expansion.</li>
<li>You may mirror either the full distributions tree, or a reduced tree that excludes a few very resource-intensive (disk-wise and bandwidth-wise) projects.</li>
<li>You must not trim or abridge the mirrored tree in any way.</li>
<li>You must not modify the mirrored tree in any way. In particular, HEADER.html and README.html files must not be altered or removed. See below for adding sponsor information.</li>
<li>Your mirror must not be shown "inside" another site using, for instance, frames. </li>
<li>You must do an <strong>update-check</strong> at least once and preferably twice a day. You may sync a maximum of four times per day, but only if you have a slow or poor connection that causes timeouts.</li>
<li>You must subscribe to the mailing list for mirror maintainers (see below).</li>
</ul>
<p>In addition, we require that you run the <a href="https://httpd.apache.org/" target="_blank">Apache HTTP Server</a> version 2.2 or later and use the following configuration for your web mirror to allow all the features of our download site to function optimally:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;Directory</span> <span class="err">/path/to/mirror</span><span class="nt">&gt;</span>
  IndexOptions FancyIndexing NameWidth=* FoldersFirst ScanHTMLTitles DescriptionWidth=*
  HeaderName HEADER.html
  ReadmeName README.html
  AllowOverride FileInfo Indexes
  Options Indexes SymLinksIfOwnerMatch FollowSymLinks
  ErrorDocument 404 default
<span class="nt">&lt;/Directory&gt;</span>
</code></pre></div>

<p><strong>Note</strong> that our HEADER.html files do not contain the HTML preamble, so it is important <strong>not</strong> to enable the <code>SuppressHTMLPreamble</code> option.</p>
<p>Please ensure that the server does not send a <code>Content-Encoding</code> header for any of the compressed archives. The hashes and signatures used to check downloads are created for the compressed archives so it is vital that the browser is not told to decompress them. For example, <code>.tar.gz</code> and <code>.tgz</code> files are compressed TAR files. They should have a suitable Content-Type - e.g. <code>application/x-gzip</code> - but no <code>Content-Encoding</code> should be sent. If the server incorrectly sends <code>Content-Encoding: x-gzip</code> (for example), many browsers will automatically decompress the response. This produces a TAR file which will not verify when checked against the hashes or sigs.</p>
<h2 id="techniques">Mirroring techniques<a class="headerlink" href="#techniques" title="Permanent link">&para;</a></h2>

<p>We only support <a href="https://rsync.samba.org/" target="_blank">rsync</a> for updating mirrors.</p>
<p>Update your mirror with:</p>
<div class="highlight"><pre><span></span><code><span class="err">rsync -avz --delete --safe-links rsync.apache.org::apache-dist /path/to/mirror</span>
</code></pre></div>

<p>To exclude resource-intensive projects, replace <code>::apache-dist</code> with <code>::apache-dist-most</code>. Do not use <code>--exclude</code>.</p>
<p>If there is a problem with file/directory permissions, make sure you use a proper umask in your cronjob:</p>
<div class="highlight"><pre><span></span><code><span class="err">umask 022 ; rsync ...</span>
</code></pre></div>

<ul>
<li>Don't rsync "on the hour" (<code>cronjob minute 0</code>). Pick a random minute between 5 and 55. Never run cronjobs at minute 0 unless the nature of the job requires it.</li>
<li>Run the job twice a day; no more than four times a day in any case.</li>
<li>Check the output from the rsynch job regularly so you can detect problems like lack of disk space or permission issues.</li>
</ul>
<h2 id="sponsorinfo">Sponsor information<a class="headerlink" href="#sponsorinfo" title="Permanent link">&para;</a></h2>

<p>Here is how to add sponsor information:</p>
<ol>
<li>Edit the file <code>/local/path/to/mirror/README.html</code></li>
<li>Add to your rsync options <code>--exclude "/README.html"</code></li>
</ol>
<p>The contents of README.html appear near the bottom of your mirror's home page.</p>
<ul>
<li>Only customize the home-page (top-level) README.html. Do not change any other README.html files. </li>
<li>Don't omit the '/' in <code>"/README.html"</code>.</li>
</ul>
<p>Please limit the contents of the README.html to something like:</p>
<div class="highlight"><pre><span></span><code><span class="n">This</span><span class="w"> </span><span class="n">mirror</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">donated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="k">domain</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">[</span><span class="n">url</span><span class="o">]</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Apache</span><span class="w"> </span><span class="k">open</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">community</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p>Search engines interpret referring to specific services or products as <em>PageRank manipulation</em>. This could hurt your site's ranking.</p>
<p>We have noticed that certain sites redirect 404 pages as a form of extra advertising or as a traffic booster. We remove mirrors that do this from our list and then send an email to the maintainer's address to ask them to correct the issue. The top level <code>/README.html</code> file, as mentioned, is the <strong>only</strong> local alteration of any part of the mirror we accept for you to provide sponsor information.</p>
<h2 id="testing">Testing your mirror<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>

<p>We sometimes get requests to add mirrors that are not working correctly. Please check at least the following:</p>
<ul>
<li>Page headers and footers display correctly</li>
<li>All top-level directories and files on the ASF mirror are present on your mirror</li>
<li>Download a couple of files to check that the process works. </li>
<li>Trying to download a missing file should generate a <code>404 Not Found</code> error. You can verify this by modifying one of the valid URLs that you tested above.</li>
</ul>
<h2 id="ready">Let us know when you are ready<a class="headerlink" href="#ready" title="Permanent link">&para;</a></h2>

<p>Once your site is configured, tested, and updating consistently, subscribe to the mirror-maintainers mailing list by sending an mail to <code>mirrors-subscribe@apache.org</code>.</p>
<p>If possible, please use an alias like <code>admin@hostname.example</code> for the contact address rather than a personal e-mail address. To subscribe the alias address, send the email to <code>mirrors-subscribe-admin=example.org@apache.org</code>.</p>
<p>Submit the details of your mirror by submitting them to the <a href="https://issues.apache.org/jira/projects/INFRA" target="_blank">Infra Issue Tracker</a>. </p>
<p>Create an account if you do not already have one, then create a new issue in the project "Infrastructure (INFRA)" with the component "Mirrors". Include the following information in the <em>Description</em> field:</p>
<ul>
<li>URL of mirror:</li>
<li>(optional) rsync mirror: <code>rsync://rsync.your.org/apache/</code></li>
<li>Country where the mirror is located:</li>
<li>Contact email address:</li>
<li>Update frequency (2-4 times per day):</li>
<li>Rsync repository used:</li>
<li>I use these rsync options:</li>
<li>I have configured my Apache HTTP server as requested (yes/no):</li>
<li>I have subscribed the contact address to mirrors@apache.org (yes/no):</li>
<li>At the moment, I rsync from this IP address: (your IP address here)</li>
<li>I am checking the output from the rsynch job on a regular basis</li>
</ul>
<p>We only use the IP address to check the logs before we add the mirror to the list. Once your mirror is on the list, you can change the IP of the mirror without notifying us.</p>
<h2 id="questions">Questions?<a class="headerlink" href="#questions" title="Permanent link">&para;</a></h2>

<p>If you have any questions, feel free to raise them in your Jira ticket (component "Mirrors") or on the mirror maintainers' public mailing list <code>mirrors@apache.org</code>. You don't need to subscribe to the list in order to post (but a short note in your signature that you request replies to be CC'd to you would help).</p>
<p><em>information will move here from https://www.apache.org/info/how-to-mirror.html</em></p>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>
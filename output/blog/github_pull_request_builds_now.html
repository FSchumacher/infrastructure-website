<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub pull request builds now available on builds.apache.org - Apache Infrastructure Website</title>
    <link rel="stylesheet" href="/css/foundation.css">
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <style type="text/css">
      .frontbox {
        border-radius: 8%;
        border: 1px solid #999; background: #444; color: #EEE; padding: 6px; margin: 3px;
      }
      .frontbox:hover {
        border-top: 4px solid #1583CC;
        margin-top: 0px;
        cursor: pointer;
      }
      .clickable {
	/* height was reduced by 40% */	
	height: 60%;
        width: 30%;
        position: absolute;     
        z-index: 1;
      }
    </style>
    <link rel="stylesheet"
          href="/highlight/default.min.css">
    <script src="/highlight/highlight.min.js"></script>  </head>
  <body style="background: #C1C1C1;">
    <!-- Menu bar --->
    <div class="row">
      <div class="top-bar" style="padding: 0; margin-bottom: 10px; background: #222; border: 1px solid #DDD; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">
        <div class="hide-for-small-only">
          <div class="top-bar-left">
            <ul class="menu" style="background: #222; padding: 0px; line-height: 1; border-bottom-left-radius: 4px;">
              <li class="notable-logo"><a href="/" target="_self" style="padding: 3px; padding-left: 7px;">
                <img style="vertical-align: middle;" src='/images/feather.png' width='18'/><span style="font-size: 1.30rem; color: #1583CC; text-transform: uppercase;">Apache Infrastructure</span></a>
              </li>
            </ul>
          </div>
          <div class="top-bar-right">
            <ul class="dropdown menu horizontal" data-dropdown-menu style="background: #222; font-size: 0.8rem; text-transform: uppercase; padding-top: 5px;">
              <li class="is-dropdown-submenu-parent">
                <a href="#" target="_self" style="padding-left: 7px;">About</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">
                  <li><a href="/team.html">About the team</a></li>
			<li><a href="https://infra.apache.org/blog" target="_blank">The Infra Blog</a></li>
                </ul>
              </li>
              <li><a href="/policies.html" target="_blank" style="padding-left: 5px;">Policies</a></li>
                           
              <li class="is-dropdown-submenu-parent">
                 <a href="#" target="_self" style="padding-left: 0px;">Services-Tools</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">
		<li><a href="/services.html">Services and Tools</a></li>
                <li><a href="/machines.html" target="_blank" >Machines and Fingerprints</a></li>
                <li><a href="https://blocky.apache.org" target="_blank" >Blocky</a></li>
		<li><a href="https://app.datadoghq.com/account/login?next=%2Finfrastructure" target="_blank" >DataDog</a></li>
		<li><a href="https://whimsy.apache.org/roster/committer/" target="_blank" >Committer Search</a></li>
		
                </ul>
              </li>
              <li><a href="/doc.html" target="_blank" style="padding-left: 5px;">Documentation</a></li>
	       <li class="is-dropdown-submenu-parent">
                 <a href="#" target="_self" style="padding-left: 0px;">Contribute</a>
                <ul class="menu" style="background: #222; font-size: 0.7rem; text-transform: uppercase; padding-top: 5px; margin-top: 5px;">	
		   <li><a href="/infra-volunteer.html">Volunteer with Infra</a></li>
		   <li><a href="/how-to-mirror.html">Become an ASF download mirror</a></li>
			<li><a href="/hosting-external-agent.html">Host a Jenkins or Buildbot agent</a></li>
		 </ul>
	       </li>
	      
              <li><a href="/stats.html" target="_blank" style="padding-left: 5px;">Status</a></li>
              <li><a href="/contact.html" style="padding-left: 5px;"><i class="fa fa-comments" style="color: #FFF; font-size: 0.9rem;"></i>Contact us</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>    
    <!-- bread crumb -->
    <div class="row">
      <div class="large-12 columns" style="font-size: 0.8rem; background-color: rgba(255,255,255,0.75); margin-bottom: 5px;">
        <a href="/">Home</a>
        <i class="fa fa-angle-double-right"></i>
        <a href="/news/github_pull_request_builds_now.html">
GitHub pull request builds now available on builds.apache.org        </a>
        (<a href="https://github.com/apache/infrastructure-website/tree/master/content/pages/news/github_pull_request_builds_now.md">edit</a>)
      </div>
    </div>
    
    
    <!-- contents -->
    <div class="row">
      <div class="large-12 columns">
        <div class="callout">
          <h2>
              GitHub pull request builds now available on builds.apache.org
          </h2>
              <p><font face="arial, helvetica, sans-serif"><span style="font-stretch: normal;">The ASF Infrastructure team is happy to announce that you can now set up jobs on <a href="https://builds.apache.org">builds.apache.org</a> to listen for pull requests to <a href="https://github.com/apache">github.com/apache</a> repositories, build that pull request&rsquo;s changes, and then comment on the pull request with the build&rsquo;s results. This is done using the <a href="http://www.cloudbees.com/products/jenkins-enterprise">Jenkins Enterprise</a> <a href="https://wiki.cloudbees.com/bin/view/DEV/Github+Pull+Request+Validation">GitHub pull request builder plugin</a>, generously provided to the ASF by our friends at <a href="http://www.cloudbees.com/">CloudBees</a>. We've set up the necessary hooks on all github.com/apache repositories that are up as of Wednesday, Oct 1, 2014, and will be adding the hooks to all new repositories going forward.</span><br/> <span style="font-stretch: normal;"></span><br/> <span style="font-stretch: normal;">Here&rsquo;s what you need to do to set it up:</span><br/> </font></p>
<ul>
<li><font face="arial, helvetica, sans-serif">Create a new job, probably copied from an existing job.</font></li>
<li><font face="arial, helvetica, sans-serif">Make sure you&rsquo;re not doing any &ldquo;mvn deploy&rdquo; or equivalent in the new job - this job shouldn&rsquo;t be deploying any artifacts to Nexus, etc.</font></li>
<li><font face="arial, helvetica, sans-serif">Check the "Enable Git validated merge support&rdquo; box - you can leave the first few fields set to their default, since we&rsquo;re not actually pushing anything. This is just required to get the pull request builder to register correctly.</font></li>
<li><font face="arial, helvetica, sans-serif"><span style="font-stretch: normal;">Set the &ldquo;GitHub project&rdquo; field to the HTTP URL for your repository - i.e.,"http://github.com/apache/incubator-brooklyn/"</span><span style="font-stretch: normal;">- make sure it ends with that trailing slash and doesn&rsquo;t include .git, etc.</span></font></li>
<li><font face="arial, helvetica, sans-serif"><span style="font-stretch: normal;"></span>In the Git SCM section of the job configuration, set the repository URL to point to the GitHub git:// URL for your repository - i.e.,&nbsp;git://github.com/apache/incubator-brooklyn.git.</font></li>
<li><font face="arial, helvetica, sans-serif">You should be able to leave the &ldquo;Branches to build&rdquo; field as is - this won&rsquo;t be relevant anyway.</font></li>
<li><font face="arial, helvetica, sans-serif">Click the &ldquo;Add&rdquo; button in &ldquo;Additional Behaviors&rdquo; and choose "Strategy for choosing what to build&rdquo;. Make sure the choosing strategy is set to &ldquo;Build commits submitted for validated merge&rdquo;.</font></li>
<li><font face="arial, helvetica, sans-serif">Uncheck any existing build triggers - this shouldn&rsquo;t be running on a schedule, polling, running when SNAPSHOT dependencies are built, etc.</font></li>
<li><font face="arial, helvetica, sans-serif">Check the &ldquo;Build pull requests to the repository&rdquo; option in the build triggers.</font></li>
<li><font face="arial, helvetica, sans-serif">Optionally change anything else in the job that you&rsquo;d like to be different for a pull request build than for a normal build - i.e., any downstream build triggers should probably be removed, &nbsp;you may want to change email recipients, etc.</font></li>
<li><font face="arial, helvetica, sans-serif">Save, and you&rsquo;re done!</font></li>
</ul>
<p> <span style="font-stretch: normal;"><font face="arial, helvetica, sans-serif">Now when a pull request is opened or new changes are pushed to an existing pull request to your repository, this job will be triggered, and it will build the pull request. A link will be added to the pull request in the list of builds for the job, and when the build completes, Jenkins will comment on the pull request with the build result and a link to the build at <a href="https://builds.apache.org">builds.apache.org</a>.&nbsp;</font></span></p>
<p><font face="arial, helvetica, sans-serif"><span style="font-stretch: normal;"></span>In addition, you can also use the "Build when a change is pushed to GitHub" option in the build triggers for non-pull request jobs, instead of polling - Jenkins receives notifications from GitHub whenever one of our repositories has been pushed to. Jenkins can then determine which jobs use that repository and the branch that was pushed to, and trigger the appropriate build.<br/> <span style="font-stretch: normal;"></span><br/> <span style="font-stretch: normal;">If you have any questions or problems, please email builds@apache.org or open a BUILDS JIRA at <a href="https://issues.apache.org/jira/browse/BUILDS/">issues.apache.org</a>.&nbsp;</span></font> </p>

        </div>
      </div>
    </div>    
    <!-- footer -->
    <div class="row">
      <div class="large-12 medium-12 columns">
        <p style="font-style: italic; font-size: 0.8rem; text-align: center;">
          Copyright 2022, <a href="https://www.apache.org/">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
          Apache&reg; and the Apache feather logo are trademarks of The Apache Software Foundation...
        </p>
      </div>
    </div>    
    <script src="/js/vendor/jquery.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.js"></script>
    <script src="/js/app.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>How to transition to a new PGP key</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog</a></h1>
                <nav><ul>
                    <li><a href="/pages/oauth-two-factor-authentication.html">OAuth Two-Factor Authentication</a></li>
                    <li><a href="/pages/asf-account-management.html">ASF account management</a></li>
                    <li><a href="/pages/apache-and-github.html">Apache and GitHub</a></li>
                    <li><a href="/pages/application-upgrades-policy-and-workflow.html">Application upgrades policy and workflow</a></li>
                    <li><a href="/pages/distributing-through-the-apple-developer-program.html">Distributing through the Apple Developer Program</a></li>
                    <li><a href="/pages/applying-the-apache-license-version-20.html">Applying the Apache license, version 2.0</a></li>
                    <li><a href="/pages/asf-pelican-build-process.html">ASF-Pelican build process</a></li>
                    <li><a href="/pages/configuring-asf-pelican.html">Configuring ASF Pelican</a></li>
                    <li><a href="/pages/asf-pelican-data-model.html">ASF Pelican data model</a></li>
                    <li><a href="/pages/asf-pelican-getting-started-guide.html">ASF-Pelican getting-started guide</a></li>
                    <li><a href="/pages/local-pelican-builds.html">Local Pelican builds</a></li>
                    <li><a href="/pages/asf-pelican-plugins.html">ASF Pelican plugins</a></li>
                    <li><a href="/pages/apache-theme-for-asf-pelican.html">Apache Theme for ASF Pelican</a></li>
                    <li><a href="/pages/asf-pelican.html">ASF-Pelican</a></li>
                    <li><a href="/pages/asfbot-irc-services-and-archives.html">ASFBot: IRC services and archives</a></li>
                    <li><a href="/pages/project-sites-using-mkdocs.html">Project sites using MKDocs</a></li>
                    <li><a href="/pages/backup-policy.html">Backup policy</a></li>
                    <li><a href="/pages/writing-a-good-bug-report.html">Writing a good bug report</a></li>
                    <li><a href="/pages/committer-email.html">Committer Email</a></li>
                    <li><a href="/pages/policy-for-outreach-to-committers.html">Policy for Outreach to Committers</a></li>
                    <li><a href="/pages/committers-faqs.html">Committers' FAQs</a></li>
                    <li><a href="/pages/contact-the-infrastructure-team.html">Contact the Infrastructure Team</a></li>
                    <li><a href="/pages/tips-for-apache-project-email-contributors.html">Tips for Apache project email contributors</a></li>
                    <li><a href="/pages/guide-for-new-project-contributors.html">Guide for new project contributors</a></li>
                    <li><a href="/pages/handling-cryptography-within-an-asf-release.html">Handling cryptography within an ASF release</a></li>
                    <li><a href="/pages/confluence-wiki-space-for-your-project.html">Confluence Wiki space for your project</a></li>
                    <li><a href="/pages/requesting-access-to-the-digicert-code-signing-service.html">Requesting access to the Digicert code signing service</a></li>
                    <li><a href="/pages/using-the-digicert-code-signing-service.html">Using the Digicert code signing service</a></li>
                    <li><a href="/pages/documentation.html">Documentation</a></li>
                    <li><a href="/pages/docker-hub-use-policy.html">Docker Hub use policy</a></li>
                    <li><a href="/pages/reference/committer/email.html">Committer e-mail configuration</a></li>
                    <li><a href="/pages/fingerprints.html">Fingerprints</a></li>
                    <li><a href="/pages/github-flavored-markdown.html">GitHub Flavored Markdown</a></li>
                    <li><a href="/pages/getting-started-with-git.html">Getting started with Git</a></li>
                    <li><a href="/pages/git-access-to-apache-subversion-codebases.html">Git access to Apache Subversion codebases</a></li>
                    <li><a href="/pages/reference/committer/git.html">Getting started with Git</a></li>
                    <li><a href="/pages/github-actions-policy.html">GitHub Actions Policy</a></li>
                    <li><a href="/pages/github-actions-and-secrets.html">GitHub Actions and Secrets</a></li>
                    <li><a href="/pages/github-pages-for-projects.html">GitHub Pages for projects</a></li>
                    <li><a href="/pages/roles-for-project-github-repositories.html">Roles for project GitHub repositories</a></li>
                    <li><a href="/pages/reference/committer/github.html">Apache and GitHub</a></li>
                    <li><a href="/pages/glossary.html">Glossary</a></li>
                    <li><a href="/pages/host-a-jenkins-or-buildbot-agent.html">Host a Jenkins or Buildbot agent</a></li>
                    <li><a href="/pages/how-to-mirror-asf-software-releases-locally.html">How to mirror ASF software releases locally</a></li>
                    <li><a href="/pages/reference/committer/id.html">Changing your account details (self serve)</a></li>
                    <li><a href="/pages/infra.html">Infra</a></li>
                    <li><a href="/pages/reference/committer/index.html">Committer Documentation</a></li>
                    <li><a href="/pages/reference/index.html">Reference Documentation</a></li>
                    <li><a href="/pages/site-wide-ban-policy.html">Site-wide ban policy</a></li>
                    <li><a href="/pages/details-on-contacting-infra.html">Details on contacting Infra</a></li>
                    <li><a href="/pages/infra-and-the-incubator.html">Infra and the Incubator</a></li>
                    <li><a href="/pages/apache-infrastructure-mailing-lists.html">Apache Infrastructure mailing lists</a></li>
                    <li><a href="/pages/volunteering-for-apache-infrastructure.html">Volunteering for Apache Infrastructure</a></li>
                    <li><a href="/pages/reference/committer/jenkins-docker.html">Using Docker with builds.apache.org</a></li>
                    <li><a href="/pages/guidelines-for-creating-a-jira-ticket.html">Guidelines for creating a Jira ticket</a></li>
                    <li class="active"><a href="/pages/how-to-transition-to-a-new-pgp-key.html">How to transition to a new PGP key</a></li>
                    <li><a href="/pages/assembling-license-and-notice-files.html">Assembling LICENSE and NOTICE files</a></li>
                    <li><a href="/pages/localization.html">Localization</a></li>
                    <li><a href="/pages/machines-and-fingerprints.html">Machines and Fingerprints</a></li>
                    <li><a href="/pages/mailing-list-migration-project.html">Mailing List Migration Project</a></li>
                    <li><a href="/pages/mail-rejection-policy.html">Mail Rejection Policy</a></li>
                    <li><a href="/pages/mailing-list-moderation.html">Mailing list moderation</a></li>
                    <li><a href="/pages/managing-project-committers.html">Managing Project Committers</a></li>
                    <li><a href="/pages/apache-download-mirror-system.html">Apache download mirror system</a></li>
                    <li><a href="/pages/guide-for-new-project-committers.html">Guide for new project committers</a></li>
                    <li><a href="/pages/reference/committer/newaccount.html">Guide to new committers</a></li>
                    <li><a href="/pages/nexus-101.html">Nexus 101</a></li>
                    <li><a href="/pages/open-access-svn.html">Open-access SVN</a></li>
                    <li><a href="/pages/cryptography-with-openpgp.html">Cryptography with OpenPGP</a></li>
                    <li><a href="/pages/reference/committer/opie.html">Using OPIE</a></li>
                    <li><a href="/pages/operating-system-upgrade-policy.html">Operating system upgrade policy</a></li>
                    <li><a href="/pages/how-to-submit-a-patch-for-project-code.html">How to submit a patch for project code</a></li>
                    <li><a href="/pages/build-and-manage-a-project-website-with-pelican-and-buildbot.html">Build and manage a project website with Pelican and Buildbot</a></li>
                    <li><a href="/pages/infra-policies.html">Infra policies</a></li>
                    <li><a href="/pages/project-blog.html">Project Blog</a></li>
                    <li><a href="/pages/project-and-product-names.html">Project and product names</a></li>
                    <li><a href="/pages/project-code-repository-policy.html">Project Code Repository Policy</a></li>
                    <li><a href="/pages/project-site-policy.html">Project site policy</a></li>
                    <li><a href="/pages/managing-your-project-web-site.html">Managing your project web site</a></li>
                    <li><a href="/pages/publishing-maven-releases-to-maven-central-repository.html">Publishing Maven Releases to Maven Central Repository</a></li>
                    <li><a href="/pages/subscribe-to-apache-software-foundation-infrastructure-events.html">Subscribe to Apache Software Foundation infrastructure events</a></li>
                    <li><a href="/pages/release-distribution-policy.html">Release Distribution Policy</a></li>
                    <li><a href="/pages/release-download-pages-for-projects.html">Release Download Pages for Projects</a></li>
                    <li><a href="/pages/release-creation-process.html">Release Creation Process</a></li>
                    <li><a href="/pages/signing-releases.html">Signing Releases</a></li>
                    <li><a href="/pages/reference/committer/release.html">Releasing project packages</a></li>
                    <li><a href="/pages/apache-maven-repositories.html">Apache Maven repositories</a></li>
                    <li><a href="/pages/requesting-an-issue-and-feature-request-tracker-for-a-project.html">Requesting an issue and feature-request tracker for a project</a></li>
                    <li><a href="/pages/response-time.html">Response time</a></li>
                    <li><a href="/pages/roadmap-for-apache-infrastructure.html">Roadmap for Apache Infrastructure</a></li>
                    <li><a href="/pages/self-hosted-runners.html">Self-hosted runners</a></li>
                    <li><a href="/pages/services-and-tools.html">Services and Tools</a></li>
                    <li><a href="/pages/slack-for-asf-projects.html">Slack for ASF projects</a></li>
                    <li><a href="/pages/dealing-with-spam-in-your-asf-email-account.html">Dealing with spam in your ASF email account</a></li>
                    <li><a href="/pages/reference/committer/start.html">Committer documentation</a></li>
                    <li><a href="/pages/status-pages.html">Status pages</a></li>
                    <li><a href="/pages/reference/committer/subversion.html">Using Subversion</a></li>
                    <li><a href="/pages/subversion-basics.html">Subversion basics</a></li>
                    <li><a href="/pages/svn-to-git-migration.html">SVN to Git migration</a></li>
                    <li><a href="/pages/reference/committer/svngit2jira.html">Subversion and Git integration with JIRA tickets</a></li>
                    <li><a href="/pages/subversion-and-git-integration-with-jira-tickets.html">Subversion and Git integration with Jira tickets</a></li>
                    <li><a href="/pages/about-the-apache-infrastructure-team.html">About the Apache Infrastructure Team</a></li>
                    <li><a href="/pages/understanding-opensource.html">Understanding Opensource</a></li>
                    <li><a href="/pages/user-documentation-for-project-releases.html">User documentation for project releases</a></li>
                    <li><a href="/pages/committer-ssh-access.html">Committer SSH Access</a></li>
                    <li><a href="/pages/source-code-repositories-at-apache.html">Source Code Repositories at Apache</a></li>
                    <li><a href="/pages/requesting-a-virtual-machine-for-a-project.html">Requesting a virtual machine for a project</a></li>
                    <li><a href="/pages/managing-virtual-machines.html">Managing virtual machines</a></li>
                    <li><a href="/pages/project-vm-policy.html">Project VM policy</a></li>
                    <li><a href="/pages/guidelines-for-project-websites.html">Guidelines for project websites</a></li>
                    <li><a href="/pages/reference/committer/website-policy.html">Web Site Guidelines</a></li>
                    <li><a href="/pages/reference/committer/website.html">How To Manage any Apache Project's Website</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">How to transition to a new PGP key</h1>
    
    <h2 id="status">Introduction<a class="headerlink" href="#status" title="Permanent link">&para;</a></h2>

<p>This document is for project <strong>committers</strong> who wish to change the PGP key they use at Apache (for example to sign releases). It explains how to create a new PGP key and break it in, gradually having it replace the old key.</p>
<h2>Contents</h2>
<ul>
<li><a href="#important">Important note</a></li>
<li><a href="#motivation">Why replace a key?</a></li>
<li><a href="#single-keyring">Using a single keyring for two keys</a></li>
<li><a href="#transition-export">Exporting both new and old keys</a></li>
<li><a href="#transition-fingerprints">Fingerprinting new and old keys</a></li>
</ul>

<h2 id="important">Important note<a class="headerlink" href="#important" title="Permanent link">&para;</a></h2>

<p>If your key has been compromised, you <strong>must not</strong> use a transition period as described below. Revoke the compromised key immediately and create a new one. Consider all <a href="https://www.apache.org/dev/release-signing.html#web-of-trust" target="_blank">web of trust</a> links signed by the old key as suspect. You must establish a completely new set of links.</p>
<h2 id="motivation">Why replace a key?<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h2>

<p>When replacing one uncompromised key with a newer (typically longer) one, using a transition period when both keys are trustworthy and participate in the <a href="https://www.apache.org/dev/release-signing.html#web-of-trust" target="_blank">web of trust</a> uses <em>trust transitivity</em> to use links to the old key to trust signatures and links created by the new key. During a transition, both keys are trustworthy but you only use the newer one to sign documents and certify links in the web of trust.</p>
<p>This document describes how to use <a href="openpgp.html">GnuPG</a> to create a new key and manage both keys during this transition period.</p>
<h2 id="single-keyring">Using a single keyring for two keys<a class="headerlink" href="#single-keyring" title="Permanent link">&para;</a></h2>

<p>It is best to use a single keyring containing both keys.</p>
<h3 id="generate-new-key">Generate a new key<a class="headerlink" href="#generate-new-key" title="Permanent link">&para;</a></h3>

<p>Generate the new key either:</p>
<ul>
<li>directly in the keyring containing the old key</li>
<li>in a new keyring, and then transfer the new key to the keyring containing the old key</li>
</ul>
<p>To generate a strong <a href="release-signing.html#rsa">RSA key</a> follow <a href="openpgp.html#generate-key">these instructions</a>. If you use a separate keyring, follow <a href="openpgp.html#secret-key-transfer">these instructions</a> to transfer it.</p>
<p>Both new and old keys should now be contained in the same keyring. Verify this by:</p>
<div class="highlight"><pre><span></span><code>$ gpg --list-secret-keys  

alice/secring.gpg


sec   1024D/AD741727 <span class="m">2009</span>-08-20
uid                  Alice Example <span class="o">(</span>EXAMPLE OF OLD KEY<span class="o">)</span> &lt;alice@example.org&gt;
ssb   1024g/268883A9 <span class="m">2009</span>-08-20


sec   4096R/E2B054B8 <span class="m">2009</span>-08-20
uid                  Alice Example <span class="o">(</span>EXAMPLE NEW KEY<span class="o">)</span> &lt;alice@example.org&gt;
ssb   4096R/4A6D5217 <span class="m">2009</span>-08-20
</code></pre></div>

<p>Both new and old keys should be listed.</p>
<h3 id="open-interaction-edit">Open interactive edit mode<a class="headerlink" href="#open-interaction-edit" title="Permanent link">&para;</a></h3>

<p>You need to perform a number of operations on the new key. Though you can perform them individually, saving and closing after each one, it is more convenient to use <em>interactive edit</em> mode.</p>
<p>Start by opening an edit session on the new key, for example E2B054B8</p>
<div class="highlight"><pre><span></span><code>$ gpg --edit-key E2B054B8
gpg <span class="o">(</span>GnuPG<span class="o">)</span> <span class="m">1</span>.4.9<span class="p">;</span> Copyright <span class="o">(</span>C<span class="o">)</span> <span class="m">2008</span> Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Secret key is available.


pub  4096R/E2B054B8  created: <span class="m">2009</span>-08-20  expires: never       usage: SC

                     trust: unknown       validity: unknown
sub  4096R/4A6D5217  created: <span class="m">2009</span>-08-20  expires: never       usage: E 

<span class="o">[</span> unknown<span class="o">]</span> <span class="o">(</span><span class="m">1</span><span class="o">)</span>. Alice Example <span class="o">(</span>EXAMPLE NEW KEY<span class="o">)</span> &lt;alice@example.org&gt;


Command&gt; 
</code></pre></div>

<h3 id="trust-new-key">Trust the new key<a class="headerlink" href="#trust-new-key" title="Permanent link">&para;</a></h3>

<p>The new key needs to be marked as ultimately trusted in this keyring. This will ensure that the <a href="release-signing.html#web-of-trust" target="_blank">web of trust</a> links signed by this key will be trusted automatically.</p>
<div class="highlight"><pre><span></span><code><span class="n">Command</span><span class="o">&gt;</span><span class="w"> </span><span class="n">trust</span><span class="w"></span>
<span class="n">pub</span><span class="w">  </span><span class="mi">4096</span><span class="n">R</span><span class="o">/</span><span class="n">E2B054B8</span><span class="w">  </span><span class="nl">created</span><span class="p">:</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span><span class="w">  </span><span class="nl">expires</span><span class="p">:</span><span class="w"> </span><span class="n">never</span><span class="w">       </span><span class="k">usage</span><span class="err">:</span><span class="w"> </span><span class="n">SC</span><span class="w"></span>

<span class="w">                     </span><span class="nl">trust</span><span class="p">:</span><span class="w"> </span><span class="k">unknown</span><span class="w">       </span><span class="nl">validity</span><span class="p">:</span><span class="w"> </span><span class="k">unknown</span><span class="w"></span>
<span class="n">sub</span><span class="w">  </span><span class="mi">4096</span><span class="n">R</span><span class="o">/</span><span class="mi">4</span><span class="n">A6D5217</span><span class="w">  </span><span class="nl">created</span><span class="p">:</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span><span class="w">  </span><span class="nl">expires</span><span class="p">:</span><span class="w"> </span><span class="n">never</span><span class="w">       </span><span class="k">usage</span><span class="err">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span>

<span class="o">[</span><span class="n"> unknown</span><span class="o">]</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="w"> </span><span class="n">Alice</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="p">(</span><span class="n">EXAMPLE</span><span class="w"> </span><span class="k">NEW</span><span class="w"> </span><span class="k">KEY</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="n">alice</span><span class="nv">@example</span><span class="p">.</span><span class="n">org</span><span class="o">&gt;</span><span class="w"></span>

<span class="n">Please</span><span class="w"> </span><span class="n">decide</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">trust</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">correctly</span><span class="w"> </span><span class="n">verify</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">users</span><span class="s1">&#39; keys</span>
<span class="s1">(by looking at passports, checking fingerprints from different sources, etc.)</span>


<span class="s1">1 = I don&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">won</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">say</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="ow">NOT</span><span class="w"> </span><span class="n">trust</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">trust</span><span class="w"> </span><span class="n">marginally</span><span class="w"></span>
<span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">trust</span><span class="w"> </span><span class="n">fully</span><span class="w"></span>
<span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">trust</span><span class="w"> </span><span class="n">ultimately</span><span class="w"></span>
<span class="w">  </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">menu</span><span class="w"></span>


<span class="n">Your</span><span class="w"> </span><span class="n">decision</span><span class="vm">?</span><span class="w"> </span><span class="mi">5</span><span class="w"></span>
<span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">really</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">ultimate</span><span class="w"> </span><span class="n">trust</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="w"></span>


<span class="n">pub</span><span class="w">  </span><span class="mi">4096</span><span class="n">R</span><span class="o">/</span><span class="n">E2B054B8</span><span class="w">  </span><span class="nl">created</span><span class="p">:</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span><span class="w">  </span><span class="nl">expires</span><span class="p">:</span><span class="w"> </span><span class="n">never</span><span class="w">       </span><span class="k">usage</span><span class="err">:</span><span class="w"> </span><span class="n">SC</span><span class="w"></span>

<span class="w">                     </span><span class="nl">trust</span><span class="p">:</span><span class="w"> </span><span class="n">ultimate</span><span class="w">      </span><span class="nl">validity</span><span class="p">:</span><span class="w"> </span><span class="k">unknown</span><span class="w"></span>
<span class="n">sub</span><span class="w">  </span><span class="mi">4096</span><span class="n">R</span><span class="o">/</span><span class="mi">4</span><span class="n">A6D5217</span><span class="w">  </span><span class="nl">created</span><span class="p">:</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span><span class="w">  </span><span class="nl">expires</span><span class="p">:</span><span class="w"> </span><span class="n">never</span><span class="w">       </span><span class="k">usage</span><span class="err">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span>

<span class="o">[</span><span class="n"> unknown</span><span class="o">]</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="w"> </span><span class="n">Alice</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="p">(</span><span class="n">EXAMPLE</span><span class="w"> </span><span class="k">NEW</span><span class="w"> </span><span class="k">KEY</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="n">alice</span><span class="nv">@example</span><span class="p">.</span><span class="n">org</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">Please</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shown</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">validity</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">necessarily</span><span class="w"> </span><span class="n">correct</span><span class="w"></span>
<span class="n">unless</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">restart</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">program</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p><h/3 id="sign-new-key">Use the old key to sign the new key<a class="headerlink" href="#sign-new-key" title="Permanent link">&para;</a></h3></p>
<p>Use the old key (AD741727, say) to sign the new key:</p>
<div class="highlight"><pre><span></span><code><span class="n">Command</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">sign</span><span class="w"> </span><span class="n">AD741727</span><span class="w"></span>

<span class="n">pub</span><span class="w">  </span><span class="mi">4096</span><span class="n">R</span><span class="o">/</span><span class="n">E2B054B8</span><span class="w">  </span><span class="nl">created</span><span class="p">:</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span><span class="w">  </span><span class="nl">expires</span><span class="p">:</span><span class="w"> </span><span class="n">never</span><span class="w">       </span><span class="k">usage</span><span class="err">:</span><span class="w"> </span><span class="n">SC</span><span class="w"></span>

<span class="w">                     </span><span class="nl">trust</span><span class="p">:</span><span class="w"> </span><span class="n">ultimate</span><span class="w">      </span><span class="nl">validity</span><span class="p">:</span><span class="w"> </span><span class="n">ultimate</span><span class="w"></span>
<span class="k">Primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="nl">fingerprint</span><span class="p">:</span><span class="w"> </span><span class="n">FF96</span><span class="w"> </span><span class="mi">6261</span><span class="w"> </span><span class="n">C995</span><span class="w"> </span><span class="mi">1</span><span class="n">DDE</span><span class="w"> </span><span class="n">BF34</span><span class="w">  </span><span class="mi">5150</span><span class="w"> </span><span class="n">D5D2</span><span class="w"> </span><span class="n">BDB5</span><span class="w"> </span><span class="n">E2B0</span><span class="w"> </span><span class="mi">54</span><span class="n">B8</span><span class="w"></span>


<span class="w"> </span><span class="n">Alice</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="p">(</span><span class="n">EXAMPLE</span><span class="w"> </span><span class="k">NEW</span><span class="w"> </span><span class="k">KEY</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="n">alice</span><span class="nv">@example</span><span class="p">.</span><span class="n">org</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="w"></span>



<span class="k">Are</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nf">sign</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">your</span><span class="w"></span>
<span class="k">key</span><span class="w"> </span><span class="ss">&quot;Alice Example (EXAMPLE OF OLD KEY) &lt;alice@example.org&gt;&quot;</span><span class="w"></span>
<span class="p">(</span><span class="n">AD741727</span><span class="p">)</span><span class="w"></span>


<span class="n">Really</span><span class="w"> </span><span class="nf">sign</span><span class="vm">?</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">N</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="w"></span>


<span class="n">You</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">passphrase</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">unlock</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">for</span><span class="w"></span>
<span class="k">user</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Alice Example (EXAMPLE OF OLD KEY) &lt;alice@example.org&gt;&quot;</span><span class="w"></span>
<span class="mi">1024</span><span class="o">-</span><span class="nc">bit</span><span class="w"> </span><span class="n">DSA</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">AD741727</span><span class="p">,</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span><span class="w"></span>
</code></pre></div>

<h3 id="check-sha">Check preferences<a class="headerlink" href="#check-sha" title="Permanent link">&para;</a></h3>

<p>Make sure you are <a href="openpgp.html#sha1">avoiding SHA-1</a> in the <a href="openpgp.html#key-prefs">key preferences</a> of both the new and old keys.</p>
<h3 id="finish-off">Complete the edit<a class="headerlink" href="#finish-off" title="Permanent link">&para;</a></h3>

<p>It is convenient to add secondary user ids for current email accounts at this point.</p>
<p>Then save your changes, which will exit you from edit mode:</p>
<div class="highlight"><pre><span></span><code><span class="err">Command&gt; save</span>
</code></pre></div>

<h3 id="sign-old-with-new">Whether to sign the old key with the new<a class="headerlink" href="#sign-old-with-new" title="Permanent link">&para;</a></h3>

<p>Arguments can be made for and against signing the old key with the new. The old key is less trustworthy now and will be revoked in future, so signing with it may be misleading for those unaware of the potential weaknesses. However, without this signature, signers of the new key will not receive the transitive benefit of the links made from the old key. Anyone who chooses not to sign the old key with the new should made efforts to re-sign links made by the old key with the new key.</p>
<h3 id="set-default-to-new">Set the default to the new key<a class="headerlink" href="#set-default-to-new" title="Permanent link">&para;</a></h3>

<p>Next, change the default key on the keyring to the new. This ensures that all future signatures use the new key. Though you could still use the old key for signing by explicitly specifying it, avoid this since the signatures will be weak.</p>
<p>To make the new key the default, set the <code>default-key</code> in the <code>gpg.conf</code> configuration file. For example, to set the default to <code>E2B054B8</code> add:</p>
<div class="highlight"><pre><span></span><code><span class="k">default</span><span class="o">-</span><span class="k">key</span><span class="w"> </span><span class="n">E2B054B8</span><span class="w"></span>
<span class="n">This</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">tested</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="nl">signature</span><span class="p">:</span><span class="w"></span>
<span class="err">$</span><span class="w"> </span><span class="n">gpg</span><span class="w"> </span><span class="c1">--detach-sig --armor document</span>

<span class="n">You</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">passphrase</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">unlock</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">for</span><span class="w"></span>
<span class="k">user</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Alice Example (EXAMPLE NEW KEY) &lt;alice@example.org&gt;&quot;</span><span class="w"></span>
<span class="mi">4096</span><span class="o">-</span><span class="nc">bit</span><span class="w"> </span><span class="n">RSA</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">E2B054B8</span><span class="p">,</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="mi">2009</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span><span class="w"></span>
</code></pre></div>

<p>Verify that the new key has been chosen by default.</p>
<h3 id="update-keys">Upload both keys<a class="headerlink" href="#update-keys" title="Permanent link">&para;</a></h3>

<p>Finish the process by uploading the new and old keys to the keyserver:</p>
<div class="highlight"><pre><span></span><code>$ gpg --send-keys E2B054B8 AD741727
</code></pre></div>

<h3 id="backups">Create backups<a class="headerlink" href="#backups" title="Permanent link">&para;</a></h3>

<p>Follow <a href="openpgp.html#backup">these instructions</a>.</p>
<h3 id="revocation-certificates">Generate and store revocation certificates<a class="headerlink" href="#revocation-certificates" title="Permanent link">&para;</a></h3>

<p>Follow <a href="openpgp.html#revocation-certs">these instructions</a> to create and securely store [generic revocation certificates](release-signing.html#revocation-cert" for the new key.</p>
<h3 id="update-documents">Update documents<a class="headerlink" href="#update-documents" title="Permanent link">&para;</a></h3>

<p>The final stage in the process is to update documents containing references to the old key so that they contain both the new and old keys. For Apache documents, follow <a href="openpgp.html#update">this checklist</a>. Use the instructions for a transition when there is a choice.</p>
<p>For other documents:</p>
<ul>
<li>Update those that contain an <a href="release-signing.html#export">export</a> with a <a href="#transition-export">dual export</a>.</li>
<li>Update those that contain a <a href="release-signing.html#fingerprint&quot;">fingerprint</a> with <a href="#transition-fingerprints">both fingerprints</a>.</li>
</ul>
<h3 id="wot">Web of trust<a class="headerlink" href="#wot" title="Permanent link">&para;</a></h3>

<p>Read this <a href="openpgp.html#wot">Guide to Apache use</a> of the <a href="release-signing.html#web-of-trust">web of trust</a> and make arrangements to include your new key at the earliest opportunity.</p>
<h2 id="transition-export">Exporting both new and old keys<a class="headerlink" href="#transition-export" title="Permanent link">&para;</a></h2>

<p>During the transition period, use a single export containing both new and old public keys whenever you need an export. </p>
<p>To create a suitable export, supply both key IDs on the command line. For example, to export keys AD741727 (old) and E2B054B8 (new) to FILENAME use:</p>
<div class="highlight"><pre><span></span><code>$ gpg --export --armor --output FILENAME AD741727 E2B054B8
</code></pre></div>

<p>This exports only the public keys, and so isn't confidential. Replace the old public key with this dual export everywhere it was published.</p>
<h2 id="transition-fingerprints">Fingerprinting new and old keys<a class="headerlink" href="#transition-fingerprints" title="Permanent link">&para;</a></h2>

<p>During the transitions, use both fingerprints. For example, to fingerprint old key <code>AD741727</code> and new key <code>E2B054B8</code>, use:</p>
<div class="highlight"><pre><span></span><code>$ gpg --fingerprint AD741727 E2B054B8
pub   1024D/AD741727 <span class="m">2009</span>-08-20
      Key <span class="nv">fingerprint</span> <span class="o">=</span> CD0C <span class="m">5281</span> D0A9 E963 19AF  F365 AD81 612A AD74 <span class="m">1727</span>
uid                  Alice Example <span class="o">(</span>EXAMPLE OF OLD KEY<span class="o">)</span> &lt;alice@example.org&gt;
sub   1024g/268883A9 <span class="m">2009</span>-08-20

pub   4096R/E2B054B8 <span class="m">2009</span>-08-20
      Key <span class="nv">fingerprint</span> <span class="o">=</span> FF96 <span class="m">6261</span> C995 1DDE BF34  <span class="m">5150</span> D5D2 BDB5 E2B0 54B8
uid                 Alice Example <span class="o">(</span>EXAMPLE NEW KEY<span class="o">)</span> &lt;alice@example.org&gt;
sub   4096R/4A6D5217 <span class="m">2009</span>-08-20
</code></pre></div>

<p>So the fingerprints are:</p>
<ul>
<li><code>CD0C 5281 D0A9 E963 19AF F365 AD81 612A AD74 1727</code> for <code>AD741727</code></li>
<li><code>FF96 6261 C995 1DDE BF34 5150 D5D2 BDB5 E2B0 54B8</code> for <code>E2B054B8</code></li>
</ul>
<p>For every fingerprint, the last 8 digits are the key ID.</p>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>Requesting a virtual machine for a project</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog</a></h1>
                <nav><ul>
                    <li><a href="/pages/oauth-two-factor-authentication.html">OAuth Two-Factor Authentication</a></li>
                    <li><a href="/pages/asf-account-management.html">ASF account management</a></li>
                    <li><a href="/pages/apache-and-github.html">Apache and GitHub</a></li>
                    <li><a href="/pages/application-upgrades-policy-and-workflow.html">Application upgrades policy and workflow</a></li>
                    <li><a href="/pages/distributing-through-the-apple-developer-program.html">Distributing through the Apple Developer Program</a></li>
                    <li><a href="/pages/applying-the-apache-license-version-20.html">Applying the Apache license, version 2.0</a></li>
                    <li><a href="/pages/asf-pelican-build-process.html">ASF-Pelican build process</a></li>
                    <li><a href="/pages/configuring-asf-pelican.html">Configuring ASF Pelican</a></li>
                    <li><a href="/pages/asf-pelican-data-model.html">ASF Pelican data model</a></li>
                    <li><a href="/pages/asf-pelican-getting-started-guide.html">ASF-Pelican getting-started guide</a></li>
                    <li><a href="/pages/local-pelican-builds.html">Local Pelican builds</a></li>
                    <li><a href="/pages/asf-pelican-plugins.html">ASF Pelican plugins</a></li>
                    <li><a href="/pages/apache-theme-for-asf-pelican.html">Apache Theme for ASF Pelican</a></li>
                    <li><a href="/pages/asf-pelican.html">ASF-Pelican</a></li>
                    <li><a href="/pages/asfbot-irc-services-and-archives.html">ASFBot: IRC services and archives</a></li>
                    <li><a href="/pages/project-sites-using-mkdocs.html">Project sites using MKDocs</a></li>
                    <li><a href="/pages/backup-policy.html">Backup policy</a></li>
                    <li><a href="/pages/writing-a-good-bug-report.html">Writing a good bug report</a></li>
                    <li><a href="/pages/committer-email.html">Committer Email</a></li>
                    <li><a href="/pages/policy-for-outreach-to-committers.html">Policy for Outreach to Committers</a></li>
                    <li><a href="/pages/committers-faqs.html">Committers' FAQs</a></li>
                    <li><a href="/pages/contact-the-infrastructure-team.html">Contact the Infrastructure Team</a></li>
                    <li><a href="/pages/tips-for-apache-project-email-contributors.html">Tips for Apache project email contributors</a></li>
                    <li><a href="/pages/guide-for-new-project-contributors.html">Guide for new project contributors</a></li>
                    <li><a href="/pages/handling-cryptography-within-an-asf-release.html">Handling cryptography within an ASF release</a></li>
                    <li><a href="/pages/confluence-wiki-space-for-your-project.html">Confluence Wiki space for your project</a></li>
                    <li><a href="/pages/requesting-access-to-the-digicert-code-signing-service.html">Requesting access to the Digicert code signing service</a></li>
                    <li><a href="/pages/using-the-digicert-code-signing-service.html">Using the Digicert code signing service</a></li>
                    <li><a href="/pages/documentation.html">Documentation</a></li>
                    <li><a href="/pages/docker-hub-use-policy.html">Docker Hub use policy</a></li>
                    <li><a href="/pages/reference/committer/email.html">Committer e-mail configuration</a></li>
                    <li><a href="/pages/fingerprints.html">Fingerprints</a></li>
                    <li><a href="/pages/github-flavored-markdown.html">GitHub Flavored Markdown</a></li>
                    <li><a href="/pages/getting-started-with-git.html">Getting started with Git</a></li>
                    <li><a href="/pages/git-access-to-apache-subversion-codebases.html">Git access to Apache Subversion codebases</a></li>
                    <li><a href="/pages/reference/committer/git.html">Getting started with Git</a></li>
                    <li><a href="/pages/github-actions-policy.html">GitHub Actions Policy</a></li>
                    <li><a href="/pages/github-actions-and-secrets.html">GitHub Actions and Secrets</a></li>
                    <li><a href="/pages/github-pages-for-projects.html">GitHub Pages for projects</a></li>
                    <li><a href="/pages/roles-for-project-github-repositories.html">Roles for project GitHub repositories</a></li>
                    <li><a href="/pages/reference/committer/github.html">Apache and GitHub</a></li>
                    <li><a href="/pages/glossary.html">Glossary</a></li>
                    <li><a href="/pages/host-a-jenkins-or-buildbot-agent.html">Host a Jenkins or Buildbot agent</a></li>
                    <li><a href="/pages/how-to-mirror-asf-software-releases-locally.html">How to mirror ASF software releases locally</a></li>
                    <li><a href="/pages/reference/committer/id.html">Changing your account details (self serve)</a></li>
                    <li><a href="/pages/reference/committer/index.html">Committer Documentation</a></li>
                    <li><a href="/pages/reference/index.html">Reference Documentation</a></li>
                    <li><a href="/pages/site-wide-ban-policy.html">Site-wide ban policy</a></li>
                    <li><a href="/pages/details-on-contacting-infra.html">Details on contacting Infra</a></li>
                    <li><a href="/pages/infra-and-the-incubator.html">Infra and the Incubator</a></li>
                    <li><a href="/pages/apache-infrastructure-mailing-lists.html">Apache Infrastructure mailing lists</a></li>
                    <li><a href="/pages/volunteering-for-apache-infrastructure.html">Volunteering for Apache Infrastructure</a></li>
                    <li><a href="/pages/reference/committer/jenkins-docker.html">Using Docker with builds.apache.org</a></li>
                    <li><a href="/pages/guidelines-for-creating-a-jira-ticket.html">Guidelines for creating a Jira ticket</a></li>
                    <li><a href="/pages/how-to-transition-to-a-new-pgp-key.html">How to transition to a new PGP key</a></li>
                    <li><a href="/pages/assembling-license-and-notice-files.html">Assembling LICENSE and NOTICE files</a></li>
                    <li><a href="/pages/localization.html">Localization</a></li>
                    <li><a href="/pages/machines-and-fingerprints.html">Machines and Fingerprints</a></li>
                    <li><a href="/pages/mailing-list-migration-project.html">Mailing List Migration Project</a></li>
                    <li><a href="/pages/mail-rejection-policy.html">Mail Rejection Policy</a></li>
                    <li><a href="/pages/mailing-list-moderation.html">Mailing list moderation</a></li>
                    <li><a href="/pages/managing-project-committers.html">Managing Project Committers</a></li>
                    <li><a href="/pages/apache-download-mirror-system.html">Apache download mirror system</a></li>
                    <li><a href="/pages/guide-for-new-project-committers.html">Guide for new project committers</a></li>
                    <li><a href="/pages/reference/committer/newaccount.html">Guide to new committers</a></li>
                    <li><a href="/pages/nexus-101.html">Nexus 101</a></li>
                    <li><a href="/pages/open-access-svn.html">Open-access SVN</a></li>
                    <li><a href="/pages/cryptography-with-openpgp.html">Cryptography with OpenPGP</a></li>
                    <li><a href="/pages/reference/committer/opie.html">Using OPIE</a></li>
                    <li><a href="/pages/operating-system-upgrade-policy.html">Operating system upgrade policy</a></li>
                    <li><a href="/pages/how-to-submit-a-patch-for-project-code.html">How to submit a patch for project code</a></li>
                    <li><a href="/pages/build-and-manage-a-project-website-with-pelican-and-buildbot.html">Build and manage a project website with Pelican and Buildbot</a></li>
                    <li><a href="/pages/infra-policies.html">Infra policies</a></li>
                    <li><a href="/pages/project-blog.html">Project Blog</a></li>
                    <li><a href="/pages/project-and-product-names.html">Project and product names</a></li>
                    <li><a href="/pages/project-code-repository-policy.html">Project Code Repository Policy</a></li>
                    <li><a href="/pages/project-site-policy.html">Project site policy</a></li>
                    <li><a href="/pages/managing-your-project-web-site.html">Managing your project web site</a></li>
                    <li><a href="/pages/publishing-maven-releases-to-maven-central-repository.html">Publishing Maven Releases to Maven Central Repository</a></li>
                    <li><a href="/pages/subscribe-to-apache-software-foundation-infrastructure-events.html">Subscribe to Apache Software Foundation infrastructure events</a></li>
                    <li><a href="/pages/release-distribution-policy.html">Release Distribution Policy</a></li>
                    <li><a href="/pages/release-download-pages-for-projects.html">Release Download Pages for Projects</a></li>
                    <li><a href="/pages/release-creation-process.html">Release Creation Process</a></li>
                    <li><a href="/pages/signing-releases.html">Signing Releases</a></li>
                    <li><a href="/pages/reference/committer/release.html">Releasing project packages</a></li>
                    <li><a href="/pages/apache-maven-repositories.html">Apache Maven repositories</a></li>
                    <li><a href="/pages/requesting-an-issue-and-feature-request-tracker-for-a-project.html">Requesting an issue and feature-request tracker for a project</a></li>
                    <li><a href="/pages/response-time.html">Response time</a></li>
                    <li><a href="/pages/roadmap-for-apache-infrastructure.html">Roadmap for Apache Infrastructure</a></li>
                    <li><a href="/pages/self-hosted-runners.html">Self-hosted runners</a></li>
                    <li><a href="/pages/services-and-tools.html">Services and Tools</a></li>
                    <li><a href="/pages/slack-for-asf-projects.html">Slack for ASF projects</a></li>
                    <li><a href="/pages/dealing-with-spam-in-your-asf-email-account.html">Dealing with spam in your ASF email account</a></li>
                    <li><a href="/pages/reference/committer/start.html">Committer documentation</a></li>
                    <li><a href="/pages/status-pages.html">Status pages</a></li>
                    <li><a href="/pages/reference/committer/subversion.html">Using Subversion</a></li>
                    <li><a href="/pages/subversion-basics.html">Subversion basics</a></li>
                    <li><a href="/pages/svn-to-git-migration.html">SVN to Git migration</a></li>
                    <li><a href="/pages/reference/committer/svngit2jira.html">Subversion and Git integration with JIRA tickets</a></li>
                    <li><a href="/pages/subversion-and-git-integration-with-jira-tickets.html">Subversion and Git integration with Jira tickets</a></li>
                    <li><a href="/pages/about-the-apache-infrastructure-team.html">About the Apache Infrastructure Team</a></li>
                    <li><a href="/pages/understanding-opensource.html">Understanding Opensource</a></li>
                    <li><a href="/pages/user-documentation-for-project-releases.html">User documentation for project releases</a></li>
                    <li><a href="/pages/committer-ssh-access.html">Committer SSH Access</a></li>
                    <li><a href="/pages/source-code-repositories-at-apache.html">Source Code Repositories at Apache</a></li>
                    <li class="active"><a href="/pages/requesting-a-virtual-machine-for-a-project.html">Requesting a virtual machine for a project</a></li>
                    <li><a href="/pages/managing-virtual-machines.html">Managing virtual machines</a></li>
                    <li><a href="/pages/project-vm-policy.html">Project VM policy</a></li>
                    <li><a href="/pages/guidelines-for-project-websites.html">Guidelines for project websites</a></li>
                    <li><a href="/pages/reference/committer/website-policy.html">Web Site Guidelines</a></li>
                    <li><a href="/pages/reference/committer/website.html">How To Manage any Apache Project's Website</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">Requesting a virtual machine for a project</h1>
    
    <p>When you want to run an application that is not part of the offered services (like a demo setup of your project), you need to request a dedicated virtual machine (vm). It is not possible to request a physical machine. Physical machines are shared resources for all ASF projects.</p>
<p>Infra maintains hosts in different computer centers around the world to run virtual machines, so we can relocate your vm as requirements change without you having to reinstall anything.</p>
<h3>Contents</h3>
<ul>
<li><a href="#request">Requesting a virtual machine</a></li>
<li><a href="#deploy">Deploying the virtual machine</a></li>
<li><a href="#maintain">Project maintainers</a></li>
<li><a href="#ssh-keys">Obtaining SSH keys</a></li>
<li><a href="#maintenance">General maintenance</a></li>
<li><a href="#cautions">Cautions</a></li>
</ul>
<h3 id="request">Requesting a virtual machine<a class="headerlink" href="#request" title="Permanent link">&para;</a></h3>

<p>To request a virtual machine, open a <a href="https://issues.apache.org/jira/browse/INFRA" target="_blank">Jira</a> ticket with at least the following information:</p>
<ol>
<li>The project's plans for the virtual machine:<ul>
<li>Why the project needs a dedicated vm</li>
<li>Is logging in used in the project's application (HTTPS is mandatory for use of login)?</li>
<li>Do any special ports need to be opened?</li>
</ul>
</li>
<li>VM resources requested (the operating system will be the latest Ubuntu LTS release):<ul>
<li>CPU cores (default is 1)</li>
<li>RAM (default is 1Gb)</li>
<li>Disk capacity (default is 20Gb)</li>
<li>Name (default is <code>&lt;project&gt;-vm.a.o</code>)</li>
<li>Apache ID of project administrator</li>
</ul>
</li>
<li>Application resources:<ul>
<li>Database (infra has central sql servers that support postgresql and mysql)</li>
<li>Httpd (installed pr default, configuration is to be agreed upon)</li>
<li>Non-standard packages (will be maintained by infra-p6)</li>
<li>DNS names needed (default is to create <code>vmname</code> only)</li>
<li>Backup needed (default is <strong>no</strong> backups other than what is in Infra-p6)</li>
</ul>
</li>
<li>Maintainers:<ul>
<li>Provide the name, Apache ID, and contact info for at least three PMC members who will maintain the vm.</li>
</ul>
</li>
<li>Acknowledgement:<ul>
<li>Name of a PMC member who acknowledges this request on behalf of the project.</li>
</ul>
</li>
</ol>
<p>CPU and RAM are expensive resources, so unless you make a really compelling case we will start the vm with default values. If you/we see problems later we can always add more. We can add CPU cores and RAM can without reinstalling anything.</p>
<p>The operating system needs to be supported by our standard applications, therefore we currently only offer Ubuntu.</p>
<p>Important: the ticket must be acknowledged by a PMC member.</p>
<h3 id="deploy">Deploying the virtual machine<a class="headerlink" href="#deploy" title="Permanent link">&para;</a></h3>

<p>Infra may ask questions to clarify the request. When all is clear, we will create the vm according to specifications, install the OS and the mandatory standard (infra) applications. The mandatory application guarantee a level of security and provide ssh access common to all vms.</p>
<p>Once we have tested the vm, we will ask a project maintainer to do ssh to the vm.</p>
<h3 id="maintain">Project maintainers<a class="headerlink" href="#maintain" title="Permanent link">&para;</a></h3>

<p>The project maintainers are responsible for maintaining the vm. Infra will normally not maintain the vm, but will check on security from time to time.</p>
<p>Each project maintainer needs to have ssh keys uploaded to <code>id.a.o</code> before requesting the vm. Maintainers use the ssh keys stored in LDAP to log in to the vm.</p>
<p>When the vm is created, each maintainer gets karma to access the vm (ldap add host to userid). Once that has been tested, it is time to get sudo karma if it is required.</p>
<p>To prepare for sudo karma follow the <a href="https://reference.apache.org/committer/opie" target="_blank">OPIE guidelines</a>.</p>
<p>When OPIE works, contact us on #asfinfra, or by commenting on the issue, and sudo karma will be granted (ldap add userid to sudoer group).</p>
<h3 id="ssh-keys">Obtaining SSH keys<a class="headerlink" href="#ssh-keys" title="Permanent link">&para;</a></h3>

<p>To use key-based login, you need to generate a key on your local desktop (do not use a publicly accessible server for this) and then add your public key to LDAP using the self-service app at <code>https://id.apache.org</code>.</p>
<p>Once you have done this, wait at least 10 mins. You should then be able to log in as follows:</p>
<div class="highlight"><pre><span></span><code>
</code></pre></div>

<p>Depending on your client setup, you may need to run the following command to ensure the key(s) are made available to the SSH client on your system:</p>
<div class="highlight"><pre><span></span><code>
</code></pre></div>

<p>If you use PuTTY, make sure it is configured to force SSH v2 protocol. And use keyboard-interactive.</p>
<p>Once you have logged in, there are few tasks best performed right away. Please take care when using your shell account.</p>
<p>Check that your umask is set in a group-friendly fashion. This ensures that the documents you create are editable by your fellow committers. To do this, (depending on which shell you use) edit the <code>.cshrc</code> file or <code>.profile</code> (sh derivatives) so the umask is set as follows:</p>
<div class="highlight"><pre><span></span><code><span class="err">umask 002</span>
</code></pre></div>

<p>If a umask line already exists, modify it. Otherwise, add a new line. You will need to use a <code>*nix</code> command-line editor such as <code>vi</code>.</p>
<p>Tip: You can review the files of some other committer: <code>ls -al ~mymentor; cat ~mymentor/.cshrc</code>.</p>
<h3 id="maintenance">General maintenance<a class="headerlink" href="#maintenance" title="Permanent link">&para;</a></h3>

<p>There are no mandatory rules, but here are some suggestions:</p>
<ul>
<li>Keep all changes in Git/Puppet. See: <code>https://github.com/apache/infrastructure-p6</code><ul>
<li>If you do not have karma, please create PRs in a branch against our Github repository.</li>
<li>Keep all application data in <code>/x1</code> if possible.</li>
</ul>
</li>
<li>Update Puppet with all extra installed packages.<ul>
<li>See <code>https://github.com/apache/infrastructure-p6/tree/production/modules/&lt;vmname&gt;/manifests/init.pp</code></li>
<li>See also the <a href="https://cwiki.apache.org/confluence/display/INFRA/Git+workflow+for+infrastructure-puppet+repo" target="_blank">Git workflow for an Infrastructure Puppet repository</a>.</li>
</ul>
</li>
</ul>
<p>See also <a href="vm-management.html">Managing virtual machines</a></p>
<h3 id="cautions">Cautions<a class="headerlink" href="#cautions" title="Permanent link">&para;</a></h3>

<ul>
<li>Do not try to change items controlled by puppet, such as:<ul>
<li>iptables</li>
<li>sshd</li>
<li>ldap</li>
<li>/root/bin</li>
<li>anything else relevant for security</li>
</ul>
</li>
<li>As sudoer you are expected to know what you do, and are expected to clear any problems you create.</li>
</ul>
<p>Before doing something, you are always welcome to join #asfinfra on Slack and ask about it.</p>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>ASF Pelican plugins</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog</a></h1>
                <nav><ul>
                    <li><a href="/pages/oauth-two-factor-authentication.html">OAuth Two-Factor Authentication</a></li>
                    <li><a href="/pages/asf-account-management.html">ASF account management</a></li>
                    <li><a href="/pages/apache-and-github.html">Apache and GitHub</a></li>
                    <li><a href="/pages/application-upgrades-policy-and-workflow.html">Application upgrades policy and workflow</a></li>
                    <li><a href="/pages/distributing-through-the-apple-developer-program.html">Distributing through the Apple Developer Program</a></li>
                    <li><a href="/pages/applying-the-apache-license-version-20.html">Applying the Apache license, version 2.0</a></li>
                    <li><a href="/pages/asf-pelican-build-process.html">ASF-Pelican build process</a></li>
                    <li><a href="/pages/configuring-asf-pelican.html">Configuring ASF Pelican</a></li>
                    <li><a href="/pages/asf-pelican-data-model.html">ASF Pelican data model</a></li>
                    <li><a href="/pages/asf-pelican-getting-started-guide.html">ASF-Pelican getting-started guide</a></li>
                    <li><a href="/pages/local-pelican-builds.html">Local Pelican builds</a></li>
                    <li class="active"><a href="/pages/asf-pelican-plugins.html">ASF Pelican plugins</a></li>
                    <li><a href="/pages/apache-theme-for-asf-pelican.html">Apache Theme for ASF Pelican</a></li>
                    <li><a href="/pages/asf-pelican.html">ASF-Pelican</a></li>
                    <li><a href="/pages/asfbot-irc-services-and-archives.html">ASFBot: IRC services and archives</a></li>
                    <li><a href="/pages/project-sites-using-mkdocs.html">Project sites using MKDocs</a></li>
                    <li><a href="/pages/backup-policy.html">Backup policy</a></li>
                    <li><a href="/pages/writing-a-good-bug-report.html">Writing a good bug report</a></li>
                    <li><a href="/pages/committer-email.html">Committer Email</a></li>
                    <li><a href="/pages/policy-for-outreach-to-committers.html">Policy for Outreach to Committers</a></li>
                    <li><a href="/pages/committers-faqs.html">Committers' FAQs</a></li>
                    <li><a href="/pages/contact-the-infrastructure-team.html">Contact the Infrastructure Team</a></li>
                    <li><a href="/pages/tips-for-apache-project-email-contributors.html">Tips for Apache project email contributors</a></li>
                    <li><a href="/pages/guide-for-new-project-contributors.html">Guide for new project contributors</a></li>
                    <li><a href="/pages/handling-cryptography-within-an-asf-release.html">Handling cryptography within an ASF release</a></li>
                    <li><a href="/pages/confluence-wiki-space-for-your-project.html">Confluence Wiki space for your project</a></li>
                    <li><a href="/pages/requesting-access-to-the-digicert-code-signing-service.html">Requesting access to the Digicert code signing service</a></li>
                    <li><a href="/pages/using-the-digicert-code-signing-service.html">Using the Digicert code signing service</a></li>
                    <li><a href="/pages/documentation.html">Documentation</a></li>
                    <li><a href="/pages/docker-hub-use-policy.html">Docker Hub use policy</a></li>
                    <li><a href="/pages/reference/committer/email.html">Committer e-mail configuration</a></li>
                    <li><a href="/pages/fingerprints.html">Fingerprints</a></li>
                    <li><a href="/pages/github-flavored-markdown.html">GitHub Flavored Markdown</a></li>
                    <li><a href="/pages/getting-started-with-git.html">Getting started with Git</a></li>
                    <li><a href="/pages/git-access-to-apache-subversion-codebases.html">Git access to Apache Subversion codebases</a></li>
                    <li><a href="/pages/reference/committer/git.html">Getting started with Git</a></li>
                    <li><a href="/pages/github-actions-policy.html">GitHub Actions Policy</a></li>
                    <li><a href="/pages/github-actions-and-secrets.html">GitHub Actions and Secrets</a></li>
                    <li><a href="/pages/github-pages-for-projects.html">GitHub Pages for projects</a></li>
                    <li><a href="/pages/roles-for-project-github-repositories.html">Roles for project GitHub repositories</a></li>
                    <li><a href="/pages/reference/committer/github.html">Apache and GitHub</a></li>
                    <li><a href="/pages/glossary.html">Glossary</a></li>
                    <li><a href="/pages/host-a-jenkins-or-buildbot-agent.html">Host a Jenkins or Buildbot agent</a></li>
                    <li><a href="/pages/how-to-mirror-asf-software-releases-locally.html">How to mirror ASF software releases locally</a></li>
                    <li><a href="/pages/reference/committer/id.html">Changing your account details (self serve)</a></li>
                    <li><a href="/pages/reference/committer/index.html">Committer Documentation</a></li>
                    <li><a href="/pages/reference/index.html">Reference Documentation</a></li>
                    <li><a href="/pages/site-wide-ban-policy.html">Site-wide ban policy</a></li>
                    <li><a href="/pages/details-on-contacting-infra.html">Details on contacting Infra</a></li>
                    <li><a href="/pages/infra-and-the-incubator.html">Infra and the Incubator</a></li>
                    <li><a href="/pages/apache-infrastructure-mailing-lists.html">Apache Infrastructure mailing lists</a></li>
                    <li><a href="/pages/volunteering-for-apache-infrastructure.html">Volunteering for Apache Infrastructure</a></li>
                    <li><a href="/pages/reference/committer/jenkins-docker.html">Using Docker with builds.apache.org</a></li>
                    <li><a href="/pages/guidelines-for-creating-a-jira-ticket.html">Guidelines for creating a Jira ticket</a></li>
                    <li><a href="/pages/how-to-transition-to-a-new-pgp-key.html">How to transition to a new PGP key</a></li>
                    <li><a href="/pages/assembling-license-and-notice-files.html">Assembling LICENSE and NOTICE files</a></li>
                    <li><a href="/pages/localization.html">Localization</a></li>
                    <li><a href="/pages/machines-and-fingerprints.html">Machines and Fingerprints</a></li>
                    <li><a href="/pages/mailing-list-migration-project.html">Mailing List Migration Project</a></li>
                    <li><a href="/pages/mail-rejection-policy.html">Mail Rejection Policy</a></li>
                    <li><a href="/pages/mailing-list-moderation.html">Mailing list moderation</a></li>
                    <li><a href="/pages/managing-project-committers.html">Managing Project Committers</a></li>
                    <li><a href="/pages/apache-download-mirror-system.html">Apache download mirror system</a></li>
                    <li><a href="/pages/guide-for-new-project-committers.html">Guide for new project committers</a></li>
                    <li><a href="/pages/reference/committer/newaccount.html">Guide to new committers</a></li>
                    <li><a href="/pages/nexus-101.html">Nexus 101</a></li>
                    <li><a href="/pages/open-access-svn.html">Open-access SVN</a></li>
                    <li><a href="/pages/cryptography-with-openpgp.html">Cryptography with OpenPGP</a></li>
                    <li><a href="/pages/reference/committer/opie.html">Using OPIE</a></li>
                    <li><a href="/pages/operating-system-upgrade-policy.html">Operating system upgrade policy</a></li>
                    <li><a href="/pages/how-to-submit-a-patch-for-project-code.html">How to submit a patch for project code</a></li>
                    <li><a href="/pages/build-and-manage-a-project-website-with-pelican-and-buildbot.html">Build and manage a project website with Pelican and Buildbot</a></li>
                    <li><a href="/pages/infra-policies.html">Infra policies</a></li>
                    <li><a href="/pages/project-blog.html">Project Blog</a></li>
                    <li><a href="/pages/project-and-product-names.html">Project and product names</a></li>
                    <li><a href="/pages/project-code-repository-policy.html">Project Code Repository Policy</a></li>
                    <li><a href="/pages/project-site-policy.html">Project site policy</a></li>
                    <li><a href="/pages/managing-your-project-web-site.html">Managing your project web site</a></li>
                    <li><a href="/pages/publishing-maven-releases-to-maven-central-repository.html">Publishing Maven Releases to Maven Central Repository</a></li>
                    <li><a href="/pages/subscribe-to-apache-software-foundation-infrastructure-events.html">Subscribe to Apache Software Foundation infrastructure events</a></li>
                    <li><a href="/pages/release-distribution-policy.html">Release Distribution Policy</a></li>
                    <li><a href="/pages/release-download-pages-for-projects.html">Release Download Pages for Projects</a></li>
                    <li><a href="/pages/release-creation-process.html">Release Creation Process</a></li>
                    <li><a href="/pages/signing-releases.html">Signing Releases</a></li>
                    <li><a href="/pages/reference/committer/release.html">Releasing project packages</a></li>
                    <li><a href="/pages/apache-maven-repositories.html">Apache Maven repositories</a></li>
                    <li><a href="/pages/requesting-an-issue-and-feature-request-tracker-for-a-project.html">Requesting an issue and feature-request tracker for a project</a></li>
                    <li><a href="/pages/response-time.html">Response time</a></li>
                    <li><a href="/pages/roadmap-for-apache-infrastructure.html">Roadmap for Apache Infrastructure</a></li>
                    <li><a href="/pages/self-hosted-runners.html">Self-hosted runners</a></li>
                    <li><a href="/pages/services-and-tools.html">Services and Tools</a></li>
                    <li><a href="/pages/slack-for-asf-projects.html">Slack for ASF projects</a></li>
                    <li><a href="/pages/dealing-with-spam-in-your-asf-email-account.html">Dealing with spam in your ASF email account</a></li>
                    <li><a href="/pages/reference/committer/start.html">Committer documentation</a></li>
                    <li><a href="/pages/status-pages.html">Status pages</a></li>
                    <li><a href="/pages/reference/committer/subversion.html">Using Subversion</a></li>
                    <li><a href="/pages/subversion-basics.html">Subversion basics</a></li>
                    <li><a href="/pages/svn-to-git-migration.html">SVN to Git migration</a></li>
                    <li><a href="/pages/reference/committer/svngit2jira.html">Subversion and Git integration with JIRA tickets</a></li>
                    <li><a href="/pages/subversion-and-git-integration-with-jira-tickets.html">Subversion and Git integration with Jira tickets</a></li>
                    <li><a href="/pages/about-the-apache-infrastructure-team.html">About the Apache Infrastructure Team</a></li>
                    <li><a href="/pages/understanding-opensource.html">Understanding Opensource</a></li>
                    <li><a href="/pages/user-documentation-for-project-releases.html">User documentation for project releases</a></li>
                    <li><a href="/pages/committer-ssh-access.html">Committer SSH Access</a></li>
                    <li><a href="/pages/source-code-repositories-at-apache.html">Source Code Repositories at Apache</a></li>
                    <li><a href="/pages/requesting-a-virtual-machine-for-a-project.html">Requesting a virtual machine for a project</a></li>
                    <li><a href="/pages/managing-virtual-machines.html">Managing virtual machines</a></li>
                    <li><a href="/pages/project-vm-policy.html">Project VM policy</a></li>
                    <li><a href="/pages/guidelines-for-project-websites.html">Guidelines for project websites</a></li>
                    <li><a href="/pages/reference/committer/website-policy.html">Web Site Guidelines</a></li>
                    <li><a href="/pages/reference/committer/website.html">How To Manage any Apache Project's Website</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">ASF Pelican plugins</h1>
    
    <h1>Plugins</h1>
<p>You can find the available plugins for a site using the ASF-Pelican template in the <code>themes/plugins</code> folder of your website's project repository.</p>
<h1>Plugin architecture</h1>
<p>The plugins operate at various points in a Pelican build.</p>
<p>Pelican uses <a href="https://docs.getpelican.com/en/latest/plugins.html#list-of-signals" target="_blank">signals</a> at various points.</p>
<p>Here is a high-level review of the sequence of events:</p>
<h2>Pelican settings</h2>
<p>Settings for a Pelican build are in your Pelican configuration file, <code>pelicanconf.py</code>. Here is where you list the plugins you are using.</p>
<div class="highlight"><pre><span></span><code><span class="n">PLUGIN_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;./theme/plugins&#39;</span><span class="p">]</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;asfgenid&#39;</span><span class="p">,</span> <span class="s1">&#39;asfdata&#39;</span><span class="p">,</span> <span class="s1">&#39;pelican-gfm&#39;</span><span class="p">,</span> <span class="s1">&#39;asfreader&#39;</span><span class="p">]</span>
</code></pre></div>

<h2>Initialization</h2>
<p>At initialization, Pelican reads any ASF_DATA into a metadata dictionary that is available in every page in the site.</p>
<ul>
<li>The plugin <code>.asfdata.py</code> reads an <code>.asfdata.yaml</code> file and creates the metadata dictionary.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">ASF_DATA_YAML</span> <span class="o">=</span> <span class="s2">&quot;.asfdata.yaml&quot;</span>
<span class="n">ASF_DATA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">ASF_DATA_YAML</span><span class="p">,</span>
    <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="p">},</span>
    <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>The asfgenid plugin <code>./asfgenid.py</code> configures the site's features.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Configure the asfgenid plugin</span>
<span class="n">ASF_GENID</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;elements&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;headings&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;headings_re&#39;</span><span class="p">:</span> <span class="sa">r</span><span class="s1">&#39;^h[1-4]&#39;</span><span class="p">,</span>
    <span class="s1">&#39;permalinks&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;toc&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;toc_headers&#39;</span><span class="p">:</span> <span class="sa">r</span><span class="s2">&quot;h[1-4]&quot;</span><span class="p">,</span>
    <span class="s1">&#39;tables&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">}</span>
</code></pre></div>

<h2>Readers (readers_init)</h2>
<p>The system sets two important readers at this point. Readers are responsible for transforming page files to html and
providing a metadata dictionary.</p>
<ul>
<li>
<p>GFMReader by the pelican-gfm plugin. This code is in a private repository - ask Infra. Transforms GitHub Flavored Markdown(GFM) to HTML.</p>
</li>
<li>
<p>.md</p>
</li>
<li>.markdown</li>
<li>.mkd</li>
<li>
<p>.mdown</p>
</li>
<li>
<p><code>ASFReader,</code>.asfreader.py) transforms an <a href="https://github.com/gstein/ezt" target="_blank">ezt template</a> into GFM and then to HTML.</p>
</li>
<li>
<p>.ezmd</p>
</li>
</ul>
<h2>Content init (content_object_init)</h2>
<p>This is signaled after a reader has processed the site's content. At this point plugins can review, record, and transform the html content.</p>
<ul>
<li>The asfgenid plugin, <code>./asfgenid.py</code>, performs a number of steps. Some of the steps are optional.</li>
<li>Metadata transformation by looking up {{ key_expression }} in the page metadata.</li>
<li>Inventory of existing ID attributes.</li>
<li>Set ID and class attributes specified by {#id} and {.class} syntax.</li>
<li>Assign an ID to any headings without IDs.</li>
<li>Insert a table of contents if a [TOC] tag is present.</li>
</ul>
<h2>Apache CMS</h2>
<p>Many projects had their websites served by the Apache CMS from 2010. It was deprecated in 2021. The CMS was written in Perl. We have a new approach that fits Pelican. </p>
<p>If you want to look into the old CMS process, its <a href="http://svn.apache.org/viewvc/infrastructure/site/trunk/lib/views" target="_blank">Subversion repository and history</a> remain available.</p>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>